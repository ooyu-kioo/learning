# フェーズの分離

## 動機
変更が必要になった時にトピック毎に集中して扱うことができる

## 手順
- フェーズの後半を関数抽出
- 抽出関数に追加する引数として、中間データ構造を入れる
- 抽出関数のパラメータが分離元のコードで使われている => 中間データに移す
- 抽出元に「関数の抽出」を行い中有間データ構造を返す

## e.g.

#### 注文の価格を計算するコード

```js
function priceOrder(product, quantity, shippingMethod) {
  const basePrice = product.basePrice * quantity;
  const discount = Math.max(quantity − product.discountThreshold, 0)
                    * product.basePrice
                    * product.discountRate;
  const shippingPerCase =
    (basePrice > shippingMethod.discountThreshold)? shippingMethod.discountedFee : shippingMethod.feePerCase;
  const shippingCost = quantity * shippingPerCase;
  const price = basePrice − discount + shippingCost;
  return price;
}
```