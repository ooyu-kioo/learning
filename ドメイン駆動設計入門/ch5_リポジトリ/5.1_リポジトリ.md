## リポジトリの責務
- ドメインオブジェクトの永続化・再構築を行う = infraとmodelとの仲立ち

- ※リポジトリが行うこと
  - データのsave, delete
  - データの再構築 = find
- ※リポジトリが行わないこと
  - 更新は行わない(obj自身に変更させるべき)
  - objを作成する処理(factoryみたいな)

- 複雑なクエリ => 通常のリポジトリとは分離する(CQRSの考え適用)
  - ex：全サークルのオーナーユーザーの一覧を取得
    - ✖︎bad
      - CircleApplicationService
        - circleを全件取得
        - サークル個数分オーナーユーザーを検索
    - => ドメインのレイヤーにあるべき知識の流出を防ぐ観点からはいいんだけど、パフォーマンス低下やばみ
    - 💮good
      - CircleOrnersQueryServiceとかのserviceクラスを作る
      - その中でもうゴリゴリに書いちゃう
- => readのクエリはドメインも複数またがったり複雑なケースも多いので、DDD概念を崩す

- specへの応用
  - 元のrepositoryを継承したspec用のデータを返すclassを定義する
  - データ返却時は元のobjのディープコピーを返す(元データへの影響を避けるため)
  - save時も実際はsaveせず新たなpropを変更した新たなインスタンスを生成して返す
